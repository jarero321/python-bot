# ğŸ® Carlos Command - Sistema de Vida Integral

## DocumentaciÃ³n TÃ©cnica v1.0

**Autor:** Carlos + Claude  
**Fecha:** Noviembre 2025  
**PropÃ³sito:** Sistema personal de productividad, salud y finanzas con AI Agents

---

## ğŸ“‹ Tabla de Contenidos

1. [VisiÃ³n General](#1-visiÃ³n-general)
2. [Arquitectura del Sistema](#2-arquitectura-del-sistema)
3. [Bases de Datos Notion](#3-bases-de-datos-notion)
4. [AI Agents (DSPy)](#4-ai-agents-dspy)
5. [Flujos de Telegram](#5-flujos-de-telegram)
6. [API Endpoints (FastAPI)](#6-api-endpoints-fastapi)
7. [ConfiguraciÃ³n de N8N](#7-configuraciÃ³n-de-n8n)
8. [Datos del Usuario](#8-datos-del-usuario)
9. [Plan de ImplementaciÃ³n](#9-plan-de-implementaciÃ³n)
10. [Anexos](#10-anexos)

---

## 1. VisiÃ³n General

### 1.1 Â¿QuÃ© es Carlos Command?

Un sistema integral que funciona como **Project Manager personal** a travÃ©s de Telegram, conectado a Notion como base de datos y potenciado por AI Agents para:

- GestiÃ³n de tareas y proyectos con time blocking
- Tracking de salud (gym PPL, nutriciÃ³n, peso)
- Control financiero (deudas, ingresos, gastos)
- Aprendizaje con rotaciÃ³n balanceada
- Recordatorios persistentes e inteligentes

### 1.2 FilosofÃ­a del Sistema

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    PRINCIPIOS CORE                          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                             â”‚
â”‚  1. El bot te BUSCA, no tÃº a Ã©l                            â”‚
â”‚  2. Pregunta cuando no entiende, no inventa                â”‚
â”‚  3. Insiste hasta que respondas o reprogrames              â”‚
â”‚  4. Sin juicio, pero con honestidad brutal                 â”‚
â”‚  5. Cada decisiÃ³n se muestra con su impacto real           â”‚
â”‚  6. Protege tu tiempo de deep work                         â”‚
â”‚  7. Celebra victorias, confronta excusas                   â”‚
â”‚                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 1.3 Stack TecnolÃ³gico

| Componente | TecnologÃ­a | PropÃ³sito |
|------------|------------|-----------|
| Frontend/UI | Telegram Bot | Interfaz conversacional |
| Orquestador | N8N (self-hosted) | Cron jobs, webhooks, flujos |
| Backend | FastAPI (Python) | LÃ³gica de negocio, endpoints |
| AI Framework | DSPy + Gemini | Agentes inteligentes |
| Base de Datos | Notion API | Almacenamiento estructurado |
| Cache/State | SQLite/Redis | Sesiones, mÃ©tricas DSPy |
| Hosting | VPS propio (Docker) | Todo el sistema |

### 1.4 Costos Estimados

| Servicio | Costo Mensual |
|----------|---------------|
| VPS (existente) | $0 |
| Gemini API | $5-15 USD |
| Notion | Gratis |
| Telegram | Gratis |
| **Total** | **~$5-15 USD/mes** |

---

## 2. Arquitectura del Sistema

### 2.1 Diagrama General

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                           VPS                                   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                 â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚   â”‚  TELEGRAM   â”‚â—„â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚            N8N                  â”‚  â”‚
â”‚   â”‚    BOT      â”‚         â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚  â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â”‚   â”‚ Workflows:              â”‚   â”‚  â”‚
â”‚                           â”‚   â”‚ â€¢ Morning Briefing      â”‚   â”‚  â”‚
â”‚                           â”‚   â”‚ â€¢ Hourly Check-ins      â”‚   â”‚  â”‚
â”‚                           â”‚   â”‚ â€¢ Pre-Payday Alert      â”‚   â”‚  â”‚
â”‚                           â”‚   â”‚ â€¢ Weekly Review         â”‚   â”‚  â”‚
â”‚                           â”‚   â”‚ â€¢ Gym Reminder          â”‚   â”‚  â”‚
â”‚                           â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚  â”‚
â”‚                           â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                          â”‚                      â”‚
â”‚                                          â–¼                      â”‚
â”‚                           â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚                           â”‚          FASTAPI                â”‚  â”‚
â”‚                           â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚  â”‚
â”‚                           â”‚  â”‚ Endpoints:                â”‚  â”‚  â”‚
â”‚                           â”‚  â”‚ â€¢ POST /inbox             â”‚  â”‚  â”‚
â”‚                           â”‚  â”‚ â€¢ POST /task/status       â”‚  â”‚  â”‚
â”‚                           â”‚  â”‚ â€¢ GET  /morning-plan      â”‚  â”‚  â”‚
â”‚                           â”‚  â”‚ â€¢ POST /meal/log          â”‚  â”‚  â”‚
â”‚                           â”‚  â”‚ â€¢ POST /workout/log       â”‚  â”‚  â”‚
â”‚                           â”‚  â”‚ â€¢ GET  /finance/summary   â”‚  â”‚  â”‚
â”‚                           â”‚  â”‚ â€¢ POST /purchase/analyze  â”‚  â”‚  â”‚
â”‚                           â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚  â”‚
â”‚                           â”‚              â”‚                  â”‚  â”‚
â”‚                           â”‚              â–¼                  â”‚  â”‚
â”‚                           â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚  â”‚
â”‚                           â”‚  â”‚     DSPy Agents           â”‚  â”‚  â”‚
â”‚                           â”‚  â”‚ â€¢ InboxProcessor          â”‚  â”‚  â”‚
â”‚                           â”‚  â”‚ â€¢ ComplexityAnalyzer      â”‚  â”‚  â”‚
â”‚                           â”‚  â”‚ â€¢ TimeBlockGuardian       â”‚  â”‚  â”‚
â”‚                           â”‚  â”‚ â€¢ NutritionAnalyzer       â”‚  â”‚  â”‚
â”‚                           â”‚  â”‚ â€¢ WorkoutLogger           â”‚  â”‚  â”‚
â”‚                           â”‚  â”‚ â€¢ SpendingAnalyzer        â”‚  â”‚  â”‚
â”‚                           â”‚  â”‚ â€¢ (+ 6 mÃ¡s)               â”‚  â”‚  â”‚
â”‚                           â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚  â”‚
â”‚                           â”‚              â”‚                  â”‚  â”‚
â”‚                           â”‚              â–¼                  â”‚  â”‚
â”‚                           â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚  â”‚
â”‚                           â”‚  â”‚      Gemini API           â”‚  â”‚  â”‚
â”‚                           â”‚  â”‚   ($300 crÃ©dito)          â”‚  â”‚  â”‚
â”‚                           â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚  â”‚
â”‚                           â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                          â”‚                      â”‚
â”‚                                          â–¼                      â”‚
â”‚                           â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚                           â”‚        NOTION API               â”‚  â”‚
â”‚                           â”‚   (8 Databases)                 â”‚  â”‚
â”‚                           â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                                 â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                              â”‚
â”‚   â”‚   SQLite    â”‚  â† Historial conversaciones + MÃ©tricas DSPy  â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                              â”‚
â”‚                                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 2.2 Flujo de Datos

```
Usuario (Telegram)
       â”‚
       â–¼
   N8N Webhook â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
       â”‚                          â”‚
       â–¼                          â–¼
   FastAPI                   Cron Jobs
       â”‚                     (Scheduled)
       â–¼                          â”‚
   DSPy Agent â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â”œâ”€â”€â–º Gemini (LLM)
       â”‚
       â–¼
   Notion API
       â”‚
       â–¼
   Response â”€â”€â–º N8N â”€â”€â–º Telegram
```

---

## 3. Bases de Datos Notion

### 3.1 Overview

| # | Database | PropÃ³sito | Relaciones |
|---|----------|-----------|------------|
| 1 | ğŸ“¥ Inbox | Captura rÃ¡pida | â†’ Tasks, Knowledge |
| 2 | âœ… Tasks | GestiÃ³n de tareas | â†’ Projects, Inbox |
| 3 | ğŸ“ Projects | Proyectos y metas | â†’ Tasks, Finance |
| 4 | ğŸ“š Knowledge | Base de conocimiento | â†’ Tasks, Projects |
| 5 | ğŸ½ï¸ Daily Nutrition | Comidas diarias | - |
| 6 | ğŸ‹ï¸ Workouts | Sesiones de gym | â†’ Exercises |
| 7 | ğŸ’° Transactions | Movimientos de dinero | â†’ Projects |
| 8 | ğŸ’³ Debts | Deudas activas | â†’ Transactions |

### 3.2 ğŸ“¥ Inbox Database

**PropÃ³sito:** Captura rÃ¡pida de cualquier cosa que llegue

| Campo | Tipo | DescripciÃ³n | Requerido |
|-------|------|-------------|-----------|
| `Contenido` | Title | Lo que capturaste | âœ… |
| `Fuente` | Select | Telegram, Manual, Voz | âœ… |
| `Fecha` | Date | Timestamp automÃ¡tico | âœ… |
| `Procesado` | Checkbox | Â¿Ya clasificado? | âœ… |
| `Confianza AI` | Number | 0-100% del clasificador | - |
| `Proyecto Sugerido` | Relation | Sugerencia del AI | - |
| `Notas` | Text | Contexto adicional | - |

**Vistas:**
- `Sin Procesar` - Filter: Procesado = false
- `Hoy` - Filter: Fecha = Today
- `Por Proyecto` - Group by: Proyecto Sugerido

### 3.3 âœ… Tasks Database

**PropÃ³sito:** Todas las tareas unificadas (trabajo, freelance, personal)

| Campo | Tipo | Opciones/DescripciÃ³n | Requerido |
|-------|------|---------------------|-----------|
| `Tarea` | Title | Nombre de la tarea | âœ… |
| `Proyecto` | Relation | â†’ Projects | - |
| `Contexto` | Select | PayCash, Freelance-PA, Freelance-Google, Personal, Workana, Estudio | âœ… |
| `Estado` | Select | ğŸ“¥ Backlog, ğŸ“‹ Planned, ğŸ¯ Today, âš¡ Doing, â¸ï¸ Paused, âœ… Done, âŒ Cancelled | âœ… |
| `Prioridad` | Select | ğŸ”¥ Urgente, âš¡ Alta, ğŸ”„ Normal, ğŸ§Š Baja | - |
| `Complejidad` | Select | ğŸŸ¢ Quick (<30m), ğŸŸ¡ Standard (30m-2h), ğŸ”´ Heavy (2-4h), âš« Epic (4h+) | - |
| `EnergÃ­a` | Select | ğŸ§  Deep Work, ğŸ’ª Medium, ğŸ˜´ Low | - |
| `Tiempo Est.` | Select | 15m, 30m, 1h, 2h, 4h, 8h | - |
| `Tiempo Real` | Number | Minutos reales | - |
| `Bloque` | Select | ğŸŒ… Morning, â˜€ï¸ Afternoon, ğŸŒ† Evening | - |
| `Daily Slot` | Select | Morning-1, Morning-2, Noon-1, Evening-1, etc. | - |
| `Fecha Do` | Date | CuÃ¡ndo hacerla | - |
| `Fecha Due` | Date | Deadline | - |
| `Fecha Done` | Date | CuÃ¡ndo se completÃ³ | - |
| `En Jira` | Checkbox | Â¿Documentada en Jira? | - |
| `Bloqueada` | Checkbox | Â¿Tiene blocker? | - |
| `Blocker` | Text | DescripciÃ³n del blocker | - |
| `Recordatorio` | Date | Fecha/hora de reminder | - |
| `From Inbox` | Relation | â†’ Inbox | - |
| `Subtareas` | Relation | â†’ Tasks (self) | - |
| `Notas` | Text | Contexto adicional | - |

**Vistas:**
- `Hoy` - Filter: Estado = Today OR Doing, Sort: Prioridad
- `Esta Semana` - Filter: Fecha Do = This Week
- `Por Proyecto` - Group by: Proyecto
- `Backlog` - Filter: Estado = Backlog
- `Deep Work` - Filter: EnergÃ­a = Deep Work, Estado != Done
- `Quick Wins` - Filter: Complejidad = Quick, Estado != Done

### 3.4 ğŸ“ Projects Database

**PropÃ³sito:** Todos los proyectos (trabajo, freelance, aprendizaje, personal, financieros)

| Campo | Tipo | Opciones/DescripciÃ³n | Requerido |
|-------|------|---------------------|-----------|
| `Proyecto` | Title | Nombre | âœ… |
| `Tipo` | Select | ğŸ’¼ Trabajo, ğŸ’° Freelance, ğŸ“š Aprendizaje, ğŸš€ Side Project, ğŸ  Personal, ğŸ¯ Hobby, ğŸ’³ Financiero, ğŸ” BÃºsqueda | âœ… |
| `Estado` | Select | ğŸ’¡ Idea, ğŸ“ Planning, ğŸŸ¢ Activo, ğŸŸ¡ Esperando, â¸ï¸ Pausado, âœ… Completado, âŒ Cancelado | âœ… |
| `Objetivo` | Text | Meta final del proyecto | - |
| `Hito Actual` | Text | Milestone en progreso | - |
| `Progreso Hito` | Number | % del hito (0-100) | - |
| `Genera Dinero` | Checkbox | Â¿Produce ingresos? | - |
| `Ingreso Potencial` | Number | $ estimado | - |
| `Genera Bienestar` | Multi-select | RelajaciÃ³n, Mental, Social, Creativo, FÃ­sico | - |
| `Costo` | Number | $ si tiene costo | - |
| `Cliente` | Text | Nombre del cliente | - |
| `Deadline` | Date | Fecha lÃ­mite | - |
| `Ãšltima Actividad` | Date | Auto-update | - |
| `DÃ­as Sin Actividad` | Formula | `dateBetween(now(), prop("Ãšltima Actividad"), "days")` | - |
| `En RotaciÃ³n Estudio` | Checkbox | Si es de aprendizaje | - |
| `Prioridad Financiera` | Number | 1-10 para metas de dinero | - |
| `Tasks` | Relation | â†’ Tasks | - |
| `Transactions` | Relation | â†’ Transactions | - |
| `Notas` | Text | Contexto | - |

**Vistas:**
- `Activos` - Filter: Estado = Activo
- `Por Tipo` - Group by: Tipo
- `Necesitan AtenciÃ³n` - Filter: DÃ­as Sin Actividad > 5, Estado = Activo
- `Financieros` - Filter: Tipo = Financiero
- `Estudio (RotaciÃ³n)` - Filter: En RotaciÃ³n Estudio = true

### 3.5 ğŸ“š Knowledge Database

**PropÃ³sito:** Base de conocimiento personal

| Campo | Tipo | Opciones/DescripciÃ³n | Requerido |
|-------|------|---------------------|-----------|
| `TÃ­tulo` | Title | Nombre del conocimiento | âœ… |
| `Contenido` | Text | El conocimiento en sÃ­ | âœ… |
| `Tipo` | Select | ğŸ“ Nota, ğŸ’¡ Idea, ğŸ“° ArtÃ­culo, ğŸ¥ Video, ğŸ“š Libro, ğŸ’» CÃ³digo, ğŸ”§ SoluciÃ³n | - |
| `Topic` | Multi-select | JavaScript, Python, NetSuite, AI/ML, Business, EdiciÃ³n Video, Finanzas | - |
| `Fuente` | Select | Personal, Web, Curso, Libro, ConversaciÃ³n, Estudio | - |
| `Valor` | Select | â­â­â­â­â­, â­â­â­â­, â­â­â­, â­â­, â­ | - |
| `Proyecto` | Relation | â†’ Projects | - |
| `Task` | Relation | â†’ Tasks | - |
| `Evergreen` | Checkbox | Â¿Conocimiento atemporal? | - |
| `Fecha` | Date | CuÃ¡ndo se capturÃ³ | âœ… |

### 3.6 ğŸ½ï¸ Daily Nutrition Database

**PropÃ³sito:** Tracking de comidas (registro al final del dÃ­a)

| Campo | Tipo | Opciones/DescripciÃ³n | Requerido |
|-------|------|---------------------|-----------|
| `Fecha` | Title | DÃ­a (YYYY-MM-DD) | âœ… |
| `Desayuno` | Text | DescripciÃ³n | - |
| `Desayuno Cal` | Number | CalorÃ­as estimadas | - |
| `Desayuno Cat` | Select | ğŸŸ¢ Saludable, ğŸŸ¡ Moderado, ğŸ”´ Pesado | - |
| `Comida` | Text | DescripciÃ³n | - |
| `Comida Cal` | Number | CalorÃ­as estimadas | - |
| `Comida Cat` | Select | ğŸŸ¢ Saludable, ğŸŸ¡ Moderado, ğŸ”´ Pesado | - |
| `Cena` | Text | DescripciÃ³n | - |
| `Cena Cal` | Number | CalorÃ­as estimadas | - |
| `Cena Cat` | Select | ğŸŸ¢ Saludable, ğŸŸ¡ Moderado, ğŸ”´ Pesado | - |
| `Snacks` | Text | DescripciÃ³n | - |
| `Snacks Cal` | Number | CalorÃ­as estimadas | - |
| `Total Cal` | Formula | Suma de calorÃ­as | - |
| `ProteÃ­na OK` | Checkbox | Â¿Suficiente proteÃ­na? | - |
| `Vegetales OK` | Checkbox | Â¿ComiÃ³ vegetales? | - |
| `EvaluaciÃ³n` | Select | ğŸŸ¢ Buen dÃ­a, ğŸŸ¡ Regular, ğŸ”´ Mejorable | - |
| `Notas` | Text | Observaciones | - |

### 3.7 ğŸ‹ï¸ Workouts Database

**PropÃ³sito:** Sesiones de gym con tracking de progreso PPL

| Campo | Tipo | Opciones/DescripciÃ³n | Requerido |
|-------|------|---------------------|-----------|
| `Fecha` | Title | DÃ­a (YYYY-MM-DD) | âœ… |
| `Tipo` | Select | Push, Pull, Legs, Cardio, Rest | âœ… |
| `Completado` | Checkbox | Â¿Fuiste? | âœ… |
| `Ejercicios` | Text | JSON con ejercicios (ver estructura abajo) | - |
| `SensaciÃ³n` | Select | ğŸ’ª Fuerte, ğŸ˜… Normal, ğŸ˜“ Pesado, ğŸ¤• Molestia | - |
| `PRs` | Text | RÃ©cords personales del dÃ­a | - |
| `Peso Corporal` | Number | Kg (solo domingos) | - |
| `Notas` | Text | Observaciones, molestias | - |

**Estructura JSON de Ejercicios:**
```json
{
  "exercises": [
    {
      "name": "Press Banca",
      "sets": [
        {"weight": 62.5, "reps": 8},
        {"weight": 62.5, "reps": 8},
        {"weight": 62.5, "reps": 7}
      ],
      "pr": false
    },
    {
      "name": "Press Militar",
      "sets": [
        {"weight": 35, "reps": 12},
        {"weight": 35, "reps": 10}
      ],
      "pr": true
    }
  ]
}
```

**Vistas:**
- `Esta Semana` - Filter: Fecha = This Week
- `Por Tipo` - Group by: Tipo
- `PRs` - Filter: PRs is not empty
- `Peso Corporal` - Filter: Peso Corporal is not empty, Sort: Fecha desc

### 3.8 ğŸ’° Transactions Database

**PropÃ³sito:** Todos los movimientos de dinero

| Campo | Tipo | Opciones/DescripciÃ³n | Requerido |
|-------|------|---------------------|-----------|
| `Concepto` | Title | DescripciÃ³n | âœ… |
| `Monto` | Number | Cantidad (+ ingreso, - gasto) | âœ… |
| `Tipo` | Select | ğŸ’µ Ingreso, ğŸ  Gasto Fijo, ğŸ›’ Gasto Variable, ğŸ’³ Pago Deuda, ğŸ’° Ahorro | âœ… |
| `CategorÃ­a` | Select | Salario, Freelance, Renta, Servicios, Comida, Tech, Entretenimiento, Transporte, Deuda, Otro | âœ… |
| `Fecha` | Date | CuÃ¡ndo ocurriÃ³ | âœ… |
| `Es Esencial` | Checkbox | Â¿Necesario o gusto? | - |
| `Proyecto` | Relation | â†’ Projects (si es freelance) | - |
| `Deuda` | Relation | â†’ Debts (si es pago de deuda) | - |
| `Quincena` | Select | Q1-Enero, Q2-Enero, Q1-Febrero... | - |
| `Impulsivo` | Checkbox | Â¿Compra impulsiva? | - |
| `Notas` | Text | Contexto | - |

**Vistas:**
- `Este Mes` - Filter: Fecha = This Month
- `Por CategorÃ­a` - Group by: CategorÃ­a
- `Ingresos` - Filter: Tipo = Ingreso
- `Gastos Variables` - Filter: Tipo = Gasto Variable
- `Pagos Deuda` - Filter: Tipo = Pago Deuda
- `Compras Impulsivas` - Filter: Impulsivo = true

### 3.9 ğŸ’³ Debts Database

**PropÃ³sito:** Tracking de deudas activas

| Campo | Tipo | Opciones/DescripciÃ³n | Requerido |
|-------|------|---------------------|-----------|
| `Deuda` | Title | Nombre/descripciÃ³n | âœ… |
| `Acreedor` | Select | Banco, Tienda, Persona, Otro | âœ… |
| `Monto Original` | Number | CuÃ¡nto era inicialmente | âœ… |
| `Monto Actual` | Number | CuÃ¡nto queda | âœ… |
| `Tasa InterÃ©s` | Number | % anual | - |
| `InterÃ©s Mensual` | Formula | `prop("Monto Actual") * prop("Tasa InterÃ©s") / 100 / 12` | - |
| `Pago MÃ­nimo` | Number | Mensual requerido | âœ… |
| `Prioridad` | Number | 1 = mÃ¡s urgente (por tasa) | - |
| `Fecha Inicio` | Date | CuÃ¡ndo empezÃ³ | - |
| `Fecha LÃ­mite` | Date | Si tiene | - |
| `Pagos` | Relation | â†’ Transactions | - |
| `Progreso` | Formula | `(prop("Monto Original") - prop("Monto Actual")) / prop("Monto Original") * 100` | - |
| `Estado` | Select | ğŸ”´ Activa, ğŸŸ¡ Negociando, âœ… Liquidada | âœ… |
| `Notas` | Text | Historia, contexto | - |

**Datos Iniciales de Carlos:**

| Deuda | Monto | Tasa | Pago Min | Prioridad |
|-------|-------|------|----------|-----------|
| Tarjeta Banco | $80,000 | 60% | $4,000 | 1 |
| Coppel | $30,000 | 50% | $1,800 | 2 |
| Mercado Libre | $20,000 | 40% | $1,500 | 3 |
| Carro | $200,000 | 15% | $12,000 | 4 (fijo) |

---

## 4. AI Agents (DSPy)

### 4.1 Overview de Agentes

| # | Agente | Trigger | PropÃ³sito |
|---|--------|---------|-----------|
| 1 | InboxProcessor | Mensaje en Telegram | Clasificar captura rÃ¡pida |
| 2 | ComplexityAnalyzer | Tarea tÃ©cnica detectada | Estimar tiempo y dividir |
| 3 | TimeBlockGuardian | Durante deep work | Proteger foco, detectar distracciÃ³n |
| 4 | MorningPlanner | 6:30 AM diario | Crear plan del dÃ­a |
| 5 | CheckInAgent | Cada hora / fin de bloque | Preguntar status |
| 6 | JiraIntegrator | Tarea completada | Ayudar a documentar |
| 7 | PersistentReminder | Recordatorios pendientes | Insistir hasta resolver |
| 8 | NutritionAnalyzer | 21:00 diario | Analizar comidas del dÃ­a |
| 9 | WorkoutLogger | Post-gym | Registrar ejercicios |
| 10 | ProgressAnalyzer | Domingo | Analizar progreso semanal |
| 11 | SpendingAnalyzer | MenciÃ³n de compra | Analizar impacto financiero |
| 12 | PaydayPlanner | Pre-quincena | Crear plan de distribuciÃ³n |
| 13 | DebtStrategist | Mensual | Optimizar pagos de deuda |
| 14 | StudyBalancer | 17:30 diario | Sugerir tema de estudio |
| 15 | ProjectManager | Crear/consultar proyecto | GestiÃ³n de proyectos |

### 4.2 Signatures DSPy

#### 4.2.1 InboxProcessor

```python
import dspy

class InboxProcessor(dspy.Signature):
    """
    Clasifica un mensaje rÃ¡pido del usuario en una tarea estructurada.
    Si no tiene suficiente contexto, genera pregunta de clarificaciÃ³n.
    """
    
    # Inputs
    raw_input: str = dspy.InputField(
        desc="Mensaje del usuario tal como lo escribiÃ³"
    )
    active_projects: list = dspy.InputField(
        desc="Lista de proyectos activos con su tipo y contexto"
    )
    recent_tasks: list = dspy.InputField(
        desc="Ãšltimas 5 tareas para detectar continuidad"
    )
    current_context: str = dspy.InputField(
        desc="QuÃ© estÃ¡ haciendo ahora (deep work, break, etc)"
    )
    
    # Outputs
    confidence: float = dspy.OutputField(
        desc="0.0-1.0 quÃ© tan seguro estÃ¡ de la clasificaciÃ³n"
    )
    task_title: str = dspy.OutputField(
        desc="TÃ­tulo claro y accionable de la tarea"
    )
    suggested_project: str = dspy.OutputField(
        desc="Proyecto sugerido o 'Unknown'"
    )
    suggested_context: str = dspy.OutputField(
        desc="PayCash/Freelance-PA/Freelance-Google/Personal/Workana/Estudio"
    )
    suggested_complexity: str = dspy.OutputField(
        desc="quick/standard/heavy/epic"
    )
    is_subtask: bool = dspy.OutputField(
        desc="Â¿Es subtarea de algo que estÃ¡ haciendo?"
    )
    needs_clarification: bool = dspy.OutputField(
        desc="Â¿Necesita preguntar algo para clasificar?"
    )
    clarification_question: str = dspy.OutputField(
        desc="Pregunta especÃ­fica si needs_clarification=True"
    )
```

#### 4.2.2 ComplexityAnalyzer

```python
class ComplexityAnalyzer(dspy.Signature):
    """
    Analiza complejidad tÃ©cnica de una tarea y sugiere divisiÃ³n.
    """
    
    task_description: str = dspy.InputField()
    user_tech_stack: str = dspy.InputField(
        desc="Stack: Python, JavaScript, NetSuite, Power Automate"
    )
    similar_tasks_history: list = dspy.InputField(
        desc="Tareas similares con tiempo real que tomaron"
    )
    
    complexity: str = dspy.OutputField(
        desc="quick/standard/heavy/epic"
    )
    estimated_minutes: int = dspy.OutputField()
    energy_required: str = dspy.OutputField(
        desc="deep_work/medium/low"
    )
    should_divide: bool = dspy.OutputField(
        desc="Â¿DeberÃ­a dividirse en subtareas?"
    )
    suggested_subtasks: list = dspy.OutputField(
        desc="Lista de subtareas si should_divide=True"
    )
    potential_blockers: list = dspy.OutputField(
        desc="Posibles bloqueantes tÃ©cnicos"
    )
    requires_research: bool = dspy.OutputField()
    research_topics: list = dspy.OutputField(
        desc="QuÃ© investigar si requires_research=True"
    )
```

#### 4.2.3 TimeBlockGuardian

```python
class TimeBlockGuardian(dspy.Signature):
    """
    Protege los bloques de tiempo del usuario.
    Detecta distracciones y sugiere cÃ³mo manejarlas.
    """
    
    current_block: str = dspy.InputField(
        desc="deep_work/shallow/break/personal/study"
    )
    block_end_time: str = dspy.InputField(
        desc="HH:MM cuando termina el bloque"
    )
    current_task: str = dspy.InputField(
        desc="Tarea asignada al bloque"
    )
    user_message: str = dspy.InputField(
        desc="Lo que el usuario acaba de decir/pedir"
    )
    
    is_distraction: bool = dspy.OutputField()
    distraction_type: str = dspy.OutputField(
        desc="procrastination/valid_interruption/task_switch/emergency"
    )
    allow_interruption: bool = dspy.OutputField()
    response_tone: str = dspy.OutputField(
        desc="gentle/firm/understanding"
    )
    response_message: str = dspy.OutputField(
        desc="Mensaje para el usuario"
    )
    reschedule_suggestion: str = dspy.OutputField(
        desc="CuÃ¡ndo hacer lo que pidiÃ³ si no es ahora"
    )
```

#### 4.2.4 MorningPlanner

```python
class MorningPlanner(dspy.Signature):
    """
    Crea el plan del dÃ­a basado en tareas, calendario y energÃ­a.
    """
    
    pending_tasks: list = dspy.InputField(
        desc="Tareas en backlog/planned/today"
    )
    calendar_events: list = dspy.InputField(
        desc="Reuniones y eventos del dÃ­a"
    )
    yesterday_incomplete: list = dspy.InputField(
        desc="Tareas que no se completaron ayer"
    )
    blockers_pending: list = dspy.InputField(
        desc="Recordatorios de blockers"
    )
    habits_status: dict = dspy.InputField(
        desc="Estado de hÃ¡bitos (gym, etc)"
    )
    day_of_week: str = dspy.InputField()
    
    greeting: str = dspy.OutputField()
    top_3_tasks: list = dspy.OutputField(
        desc="Las 3 MITs del dÃ­a con bloque asignado"
    )
    time_blocks: dict = dspy.OutputField(
        desc="DistribuciÃ³n de bloques del dÃ­a"
    )
    reminders: list = dspy.OutputField(
        desc="Recordatorios importantes"
    )
    habit_prompts: list = dspy.OutputField(
        desc="Preguntas sobre hÃ¡bitos (gym, etc)"
    )
    motivation: str = dspy.OutputField(
        desc="Mensaje motivacional contextual"
    )
```

#### 4.2.5 NutritionAnalyzer

```python
class NutritionAnalyzer(dspy.Signature):
    """
    Analiza las comidas del dÃ­a y da feedback nutricional.
    """
    
    meals_description: str = dspy.InputField(
        desc="DescripciÃ³n de todo lo que comiÃ³ en el dÃ­a"
    )
    user_goals: str = dspy.InputField(
        desc="perder_peso/mantener/ganar_musculo"
    )
    activity_today: str = dspy.InputField(
        desc="gym_day/rest_day/active"
    )
    recent_nutrition_history: list = dspy.InputField(
        desc="Ãšltimos 7 dÃ­as de nutriciÃ³n"
    )
    
    meals_breakdown: list = dspy.OutputField(
        desc="Cada comida desglosada con calorÃ­as"
    )
    total_calories: int = dspy.OutputField()
    protein_status: str = dspy.OutputField(
        desc="sufficient/low/high"
    )
    vegetables_count: int = dspy.OutputField(
        desc="NÃºmero de comidas con vegetales"
    )
    overall_rating: str = dspy.OutputField(
        desc="excellent/good/moderate/poor"
    )
    specific_feedback: str = dspy.OutputField(
        desc="Feedback especÃ­fico del dÃ­a"
    )
    pattern_detected: str = dspy.OutputField(
        desc="Patrones vs dÃ­as anteriores"
    )
    tomorrow_suggestion: str = dspy.OutputField()
```

#### 4.2.6 WorkoutLogger

```python
class WorkoutLogger(dspy.Signature):
    """
    Registra sesiÃ³n de gym con comparaciÃ³n de progreso.
    """
    
    workout_type: str = dspy.InputField(
        desc="push/pull/legs"
    )
    exercises_input: str = dspy.InputField(
        desc="Lo que el usuario reportÃ³ (texto libre)"
    )
    last_session_data: dict = dspy.InputField(
        desc="Ejercicios de Ãºltima sesiÃ³n del mismo tipo"
    )
    
    exercises_structured: list = dspy.OutputField(
        desc="Ejercicios en formato estructurado"
    )
    progress_comparison: dict = dspy.OutputField(
        desc="ComparaciÃ³n ejercicio por ejercicio"
    )
    new_prs: list = dspy.OutputField(
        desc="Nuevos rÃ©cords personales"
    )
    session_rating: str = dspy.OutputField(
        desc="excellent/good/normal/poor"
    )
    improvement_count: int = dspy.OutputField(
        desc="Ejercicios que mejoraron"
    )
    feedback: str = dspy.OutputField(
        desc="Feedback de la sesiÃ³n"
    )
    next_session_targets: dict = dspy.OutputField(
        desc="Objetivos para prÃ³xima sesiÃ³n igual"
    )
```

#### 4.2.7 SpendingAnalyzer

```python
class SpendingAnalyzer(dspy.Signature):
    """
    Analiza una compra potencial en contexto financiero completo.
    """
    
    purchase_description: str = dspy.InputField()
    purchase_amount: float = dspy.InputField()
    available_budget: float = dspy.InputField(
        desc="Dinero disponible actual"
    )
    days_until_payday: int = dspy.InputField()
    total_debt: float = dspy.InputField()
    monthly_debt_interest: float = dspy.InputField(
        desc="CuÃ¡nto paga de intereses mensuales"
    )
    financial_goals: list = dspy.InputField()
    recent_purchases: list = dspy.InputField(
        desc="Compras de esta quincena"
    )
    
    is_essential: bool = dspy.OutputField()
    category: str = dspy.OutputField(
        desc="tech/food/entertainment/education/other"
    )
    impact_on_budget: str = dspy.OutputField(
        desc="low/medium/high/critical"
    )
    impact_on_debt_timeline: str = dspy.OutputField(
        desc="CÃ³mo afecta tiempo para liquidar deuda"
    )
    honest_questions: list = dspy.OutputField(
        desc="Preguntas para reflexiÃ³n (mÃ¡x 3)"
    )
    recommendation: str = dspy.OutputField(
        desc="buy/wait/skip/find_alternative"
    )
    alternative_suggestion: str = dspy.OutputField()
    guilt_free_option: str = dspy.OutputField(
        desc="CÃ³mo podrÃ­a comprarlo sin culpa"
    )
```

#### 4.2.8 PaydayPlanner

```python
class PaydayPlanner(dspy.Signature):
    """
    Crea plan de distribuciÃ³n para la quincena.
    """
    
    income_amount: float = dspy.InputField()
    fixed_expenses: list = dspy.InputField(
        desc="Lista de gastos fijos con montos"
    )
    debt_payments: list = dspy.InputField(
        desc="Deudas con mÃ­nimos y recomendaciÃ³n de extra"
    )
    financial_goals: list = dspy.InputField()
    last_period_data: dict = dspy.InputField(
        desc="CÃ³mo le fue la quincena pasada"
    )
    
    fixed_allocation: dict = dspy.OutputField(
        desc="DistribuciÃ³n a gastos fijos"
    )
    debt_allocation: dict = dspy.OutputField(
        desc="DistribuciÃ³n a deudas (mÃ­nimo + extra)"
    )
    extra_debt_payment: float = dspy.OutputField(
        desc="RecomendaciÃ³n de pago extra a deuda prioritaria"
    )
    available_for_variable: float = dspy.OutputField(
        desc="Dinero realmente disponible"
    )
    daily_budget: float = dspy.OutputField(
        desc="Presupuesto diario sugerido"
    )
    warnings: list = dspy.OutputField(
        desc="Alertas si hay riesgo"
    )
    debt_progress_projection: str = dspy.OutputField(
        desc="ProyecciÃ³n si sigue el plan"
    )
```

#### 4.2.9 DebtStrategist

```python
class DebtStrategist(dspy.Signature):
    """
    Analiza deudas y crea estrategia Ã³ptima de pago.
    """
    
    debts: list = dspy.InputField(
        desc="Lista de deudas con monto, tasa, mÃ­nimo"
    )
    monthly_income: float = dspy.InputField()
    monthly_fixed_expenses: float = dspy.InputField()
    available_for_debt: float = dspy.InputField(
        desc="Dinero mensual disponible para deudas"
    )
    
    recommended_strategy: str = dspy.OutputField(
        desc="avalanche/snowball/hybrid"
    )
    strategy_explanation: str = dspy.OutputField()
    payment_order: list = dspy.OutputField(
        desc="Orden de ataque a las deudas"
    )
    monthly_payment_plan: dict = dspy.OutputField(
        desc="CuÃ¡nto pagar a cada deuda"
    )
    months_to_debt_free: int = dspy.OutputField()
    total_interest_if_minimum: float = dspy.OutputField()
    total_interest_with_plan: float = dspy.OutputField()
    interest_saved: float = dspy.OutputField()
    milestones: list = dspy.OutputField(
        desc="Fechas clave (primera deuda liquidada, etc)"
    )
```

#### 4.2.10 StudyBalancer

```python
class StudyBalancer(dspy.Signature):
    """
    Sugiere quÃ© estudiar basado en balance y progreso.
    """
    
    study_projects: list = dspy.InputField(
        desc="Proyectos de aprendizaje con hitos"
    )
    recent_sessions: list = dspy.InputField(
        desc="Sesiones de estudio de Ãºltima semana"
    )
    project_deadlines: list = dspy.InputField()
    user_preference_today: str = dspy.InputField(
        desc="Si pidiÃ³ algo especÃ­fico, o vacÃ­o"
    )
    energy_level: str = dspy.InputField(
        desc="high/medium/low basado en el dÃ­a"
    )
    
    suggested_topic: str = dspy.OutputField()
    suggestion_reason: str = dspy.OutputField()
    alternative_topic: str = dspy.OutputField()
    balance_status: str = dspy.OutputField(
        desc="Estado del balance entre temas"
    )
    neglected_topics: list = dspy.OutputField(
        desc="Temas sin estudiar hace tiempo"
    )
    session_goal: str = dspy.OutputField(
        desc="Objetivo especÃ­fico para la sesiÃ³n"
    )
```

---

## 5. Flujos de Telegram

### 5.1 Comandos Disponibles

| Comando | DescripciÃ³n |
|---------|-------------|
| `/start` | Iniciar bot, setup inicial |
| `/plan` | Ver plan del dÃ­a actual |
| `/task [texto]` | Agregar tarea rÃ¡pida |
| `/status` | Ver estado general |
| `/gym` | Registrar workout |
| `/food` | Registrar comidas |
| `/money` | Ver resumen financiero |
| `/project` | Gestionar proyectos |
| `/help` | Ver ayuda |

### 5.2 Horarios de Mensajes Proactivos

| Hora | Mensaje | CondiciÃ³n |
|------|---------|-----------|
| 6:30 | Morning Briefing | Siempre |
| 7:15, 7:30, 7:45 | Gym reminder | Si no confirmÃ³ gym |
| 9:35 | Post-daily check | DÃ­as laborales |
| 10:30, 11:30 | Deep work check-in | Si estÃ¡ en deep work |
| 12:30 | Fin deep work 1 | DÃ­as laborales |
| 14:00 | Inicio comida | Siempre |
| 15:30 | Fin comida | Siempre |
| 16:30 | Check-in tarde | DÃ­as laborales |
| 17:30 | Hora de estudio | Siempre |
| 18:30 | Cierre laboral | DÃ­as laborales |
| 21:00 | Registro nutriciÃ³n | Siempre |
| Domingo 10:00 | Review semanal | Semanal |
| DÃ­a 13, 28 | Pre-quincena | Quincenal |
| DÃ­a 15, 30 | Post-quincena | Quincenal |

### 5.3 Flujo de ConversaciÃ³n: Captura RÃ¡pida

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    CAPTURA RÃPIDA                            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                              â”‚
â”‚  USER: "agregar endpoint de validaciÃ³n"                      â”‚
â”‚                           â”‚                                  â”‚
â”‚                           â–¼                                  â”‚
â”‚                  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                        â”‚
â”‚                  â”‚ InboxProcessor  â”‚                        â”‚
â”‚                  â”‚   confidence?   â”‚                        â”‚
â”‚                  â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜                        â”‚
â”‚                           â”‚                                  â”‚
â”‚           â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                 â”‚
â”‚           â–¼               â–¼               â–¼                 â”‚
â”‚      conf > 80%      50-80%          < 50%                  â”‚
â”‚           â”‚               â”‚               â”‚                 â”‚
â”‚           â–¼               â–¼               â–¼                 â”‚
â”‚   "âœ… Agregado a      "Â¿Para quÃ©       "No entendÃ­,       â”‚
â”‚    PayCash: Endpoint   proyecto es?"    Â¿me explicas       â”‚
â”‚    de validaciÃ³n"                        mÃ¡s?"              â”‚
â”‚           â”‚               â”‚               â”‚                 â”‚
â”‚           â–¼               â–¼               â–¼                 â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   USER responde    USER responde         â”‚
â”‚   â”‚ Complexity  â”‚         â”‚               â”‚                 â”‚
â”‚   â”‚  Analyzer   â”‚         â–¼               â–¼                 â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜   Clasificar       Clasificar            â”‚
â”‚          â”‚                                                   â”‚
â”‚          â–¼                                                   â”‚
â”‚   "ğŸ”´ Tarea Heavy                                           â”‚
â”‚    ~2h estimadas                                            â”‚
â”‚    Â¿La divido en                                            â”‚
â”‚    subtareas?"                                               â”‚
â”‚                                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 5.4 Flujo: Deep Work Protection

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                 DEEP WORK PROTECTION                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                              â”‚
â”‚  [9:30] BOT: "ğŸ§  DEEP WORK iniciado                         â”‚
â”‚              Tarea: Endpoint de pagos                        â”‚
â”‚              Hasta: 12:30"                                   â”‚
â”‚                                                              â”‚
â”‚  [10:15] USER: "revisa las propuestas de workana"           â”‚
â”‚                           â”‚                                  â”‚
â”‚                           â–¼                                  â”‚
â”‚                  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                        â”‚
â”‚                  â”‚ TimeBlockGuard  â”‚                        â”‚
â”‚                  â”‚  is_distraction â”‚                        â”‚
â”‚                  â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜                        â”‚
â”‚                           â”‚                                  â”‚
â”‚                      TRUE â”‚                                  â”‚
â”‚                           â–¼                                  â”‚
â”‚         BOT: "âš ï¸ EstÃ¡s en Deep Work                         â”‚
â”‚               hasta las 12:30.                               â”‚
â”‚                                                              â”‚
â”‚               Workana estÃ¡ agendado                          â”‚
â”‚               para 16:00-18:00.                              â”‚
â”‚                                                              â”‚
â”‚               Â¿QuÃ© prefieres?                                â”‚
â”‚               ğŸ§  Seguir con Deep Work                        â”‚
â”‚               ğŸ”„ Cambiar a Workana                           â”‚
â”‚               â° Solo 5 min y vuelvo"                        â”‚
â”‚                                                              â”‚
â”‚  USER: "solo 5 min"                                          â”‚
â”‚                           â”‚                                  â”‚
â”‚                           â–¼                                  â”‚
â”‚         BOT: "â±ï¸ Timer de 5 min activado.                   â”‚
â”‚               Te aviso cuando pasen."                        â”‚
â”‚                           â”‚                                  â”‚
â”‚                    [5 min despuÃ©s]                           â”‚
â”‚                           â”‚                                  â”‚
â”‚                           â–¼                                  â”‚
â”‚         BOT: "â° Â¡5 minutos!                                 â”‚
â”‚               Hora de volver a                               â”‚
â”‚               'Endpoint de pagos'.                           â”‚
â”‚               Â¿Listo?"                                       â”‚
â”‚                                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 5.5 Flujo: AnÃ¡lisis de Compra

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   ANÃLISIS DE COMPRA                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                              â”‚
â”‚  USER: "estoy viendo unos audÃ­fonos en 2500"                â”‚
â”‚                           â”‚                                  â”‚
â”‚                           â–¼                                  â”‚
â”‚                  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                        â”‚
â”‚                  â”‚ SpendingAnalyzerâ”‚                        â”‚
â”‚                  â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜                        â”‚
â”‚                           â”‚                                  â”‚
â”‚                           â–¼                                  â”‚
â”‚  BOT: "ğŸ›’ Compra potencial: AudÃ­fonos $2,500                â”‚
â”‚                                                              â”‚
â”‚        ğŸ“Š Tu situaciÃ³n:                                      â”‚
â”‚        â€¢ Disponible: $3,500                                  â”‚
â”‚        â€¢ DÃ­as para quincena: 12                              â”‚
â”‚        â€¢ DespuÃ©s de compra: $1,000                           â”‚
â”‚                                                              â”‚
â”‚        ğŸ’³ Impacto en deuda:                                  â”‚
â”‚        Si estos $2,500 van a la tarjeta,                    â”‚
â”‚        reduces 1 semana el tiempo de pago.                   â”‚
â”‚                                                              â”‚
â”‚        ğŸ¤” Preguntas honestas:                                â”‚
â”‚        â€¢ Â¿Los necesitas o los quieres?                       â”‚
â”‚        â€¢ Â¿Tus audÃ­fonos actuales funcionan?                  â”‚
â”‚                                                              â”‚
â”‚        Â¿QuÃ© decides?                                         â”‚
â”‚        ğŸ›’ Los compro (consciente)                            â”‚
â”‚        ğŸ“… Los agrego a wishlist                              â”‚
â”‚        ğŸ’° Los compro del prÃ³ximo freelance                   â”‚
â”‚        âŒ Tienes razÃ³n, no los necesito"                     â”‚
â”‚                                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 6. API Endpoints (FastAPI)

### 6.1 Base URL

```
http://localhost:8000/api/v1
```

### 6.2 Endpoints

#### Health Check
```
GET /health
Response: { "status": "ok", "timestamp": "..." }
```

#### Inbox
```
POST /inbox
Body: {
  "content": "string",
  "source": "telegram" | "manual" | "voice",
  "user_context": "string" (opcional)
}
Response: {
  "id": "uuid",
  "task_title": "string",
  "confidence": 0.0-1.0,
  "suggested_project": "string",
  "needs_clarification": boolean,
  "clarification_question": "string" | null,
  "complexity": "quick" | "standard" | "heavy" | "epic"
}
```

#### Tasks
```
GET /tasks/today
Response: {
  "date": "YYYY-MM-DD",
  "tasks": [...],
  "time_blocks": {...}
}

POST /tasks/{task_id}/status
Body: {
  "status": "doing" | "done" | "blocked" | "paused",
  "notes": "string" (opcional),
  "blocker": "string" (opcional),
  "actual_time": number (opcional)
}
Response: { "updated": true, "follow_up": "string" | null }

POST /tasks/{task_id}/jira-help
Body: {
  "description": "string" (texto o transcripciÃ³n)
}
Response: {
  "jira_title": "string",
  "jira_description": "string",
  "suggested_labels": [...]
}
```

#### Morning Plan
```
GET /morning-plan
Response: {
  "greeting": "string",
  "date": "YYYY-MM-DD",
  "top_3_tasks": [...],
  "calendar_events": [...],
  "reminders": [...],
  "habits": {
    "gym": { "scheduled": boolean, "time": "HH:MM" },
    "study": { "topic": "string" }
  },
  "financial_alert": "string" | null
}
```

#### Check-in
```
POST /check-in
Body: {
  "type": "hourly" | "block_end" | "deep_work",
  "current_task_id": "uuid" (opcional)
}
Response: {
  "questions": [...],
  "suggestions": [...],
  "next_check_in": "HH:MM"
}
```

#### Nutrition
```
POST /nutrition/log
Body: {
  "date": "YYYY-MM-DD",
  "meals_description": "string"
}
Response: {
  "breakdown": {
    "breakfast": { "description": "...", "calories": N, "category": "..." },
    "lunch": {...},
    "dinner": {...},
    "snacks": {...}
  },
  "total_calories": N,
  "evaluation": "excellent" | "good" | "moderate" | "poor",
  "feedback": "string",
  "protein_ok": boolean,
  "vegetables_ok": boolean
}
```

#### Workouts
```
POST /workout/log
Body: {
  "date": "YYYY-MM-DD",
  "type": "push" | "pull" | "legs",
  "exercises_description": "string"
}
Response: {
  "exercises": [...],
  "comparison": {
    "improved": N,
    "maintained": N,
    "decreased": N
  },
  "prs": [...],
  "rating": "excellent" | "good" | "normal" | "poor",
  "feedback": "string",
  "next_targets": {...}
}

GET /workout/progress
Query: ?weeks=4
Response: {
  "attendance": { "total": N, "completed": N, "rate": 0.0-1.0 },
  "by_type": {
    "push": { "sessions": N, "progress": "..." },
    "pull": {...},
    "legs": {...}
  },
  "weight_trend": [...],
  "prs_this_period": [...]
}
```

#### Finance
```
GET /finance/summary
Query: ?period=current_fortnight | month | year
Response: {
  "period": "string",
  "income": { "total": N, "breakdown": [...] },
  "expenses": { "total": N, "fixed": N, "variable": N, "breakdown": [...] },
  "debt_payments": { "total": N, "breakdown": [...] },
  "available": N,
  "debt_status": {
    "total": N,
    "monthly_interest": N,
    "progress_this_month": N
  }
}

POST /finance/purchase/analyze
Body: {
  "description": "string",
  "amount": number
}
Response: {
  "is_essential": boolean,
  "category": "string",
  "impact": "low" | "medium" | "high" | "critical",
  "honest_questions": [...],
  "recommendation": "buy" | "wait" | "skip" | "alternative",
  "debt_impact": "string",
  "alternative": "string" | null
}

GET /finance/payday-plan
Query: ?amount=number
Response: {
  "income": N,
  "distribution": {
    "fixed": {...},
    "debt_minimum": {...},
    "debt_extra": {...},
    "available": N
  },
  "daily_budget": N,
  "warnings": [...],
  "debt_projection": "string"
}
```

#### Projects
```
GET /projects
Query: ?type=all | trabajo | freelance | aprendizaje | ...
Response: {
  "projects": [...],
  "needs_attention": [...]
}

POST /projects
Body: {
  "name": "string",
  "type": "string",
  "objective": "string" (opcional),
  "generates_money": boolean,
  "potential_income": number (opcional),
  "generates_wellbeing": [...] (opcional),
  "cost": number (opcional)
}
Response: { "id": "uuid", "created": true }

GET /projects/{id}/status
Response: {
  "project": {...},
  "tasks": [...],
  "progress": {...},
  "days_since_activity": N
}
```

#### Study
```
GET /study/suggestion
Response: {
  "suggested_topic": "string",
  "reason": "string",
  "alternative": "string",
  "balance_status": "string",
  "session_goal": "string"
}

POST /study/session
Body: {
  "topic": "string",
  "duration_minutes": number,
  "notes": "string" (opcional),
  "progress_update": "string" (opcional)
}
Response: { "logged": true, "streak": N }
```

---

## 7. ConfiguraciÃ³n de N8N

### 7.1 Workflows Principales

#### 7.1.1 Morning Briefing (Cron: 6:30 AM)
```
[Cron Trigger 6:30]
       â”‚
       â–¼
[HTTP Request: GET /morning-plan]
       â”‚
       â–¼
[Format Message]
       â”‚
       â–¼
[Telegram: Send Message]
       â”‚
       â–¼
[Wait for Reply]
       â”‚
       â–¼
[HTTP Request: POST /inbox or /tasks/status]
```

#### 7.1.2 Hourly Check-in (Cron: cada hora 9-18)
```
[Cron Trigger hourly]
       â”‚
       â–¼
[Check: Is Deep Work?]
       â”‚
   â”Œâ”€â”€â”€â”´â”€â”€â”€â”
   â”‚       â”‚
   â–¼       â–¼
 [Yes]   [No]
   â”‚       â”‚
   â–¼       â–¼
[Light   [Full
check]   check]
   â”‚       â”‚
   â””â”€â”€â”€â”¬â”€â”€â”€â”˜
       â”‚
       â–¼
[Telegram: Send Check-in]
```

#### 7.1.3 Telegram Message Handler (Webhook)
```
[Telegram Webhook]
       â”‚
       â–¼
[Parse Message]
       â”‚
       â–¼
[Route by Content]
       â”‚
   â”Œâ”€â”€â”€â”¼â”€â”€â”€â”¬â”€â”€â”€â”¬â”€â”€â”€â”
   â”‚   â”‚   â”‚   â”‚   â”‚
   â–¼   â–¼   â–¼   â–¼   â–¼
[Cmd][Task][Gym][Food][Purchase]
   â”‚   â”‚   â”‚   â”‚   â”‚
   â–¼   â–¼   â–¼   â–¼   â–¼
[Respective API Endpoint]
       â”‚
       â–¼
[Telegram: Send Response]
```

#### 7.1.4 Gym Reminder Loop
```
[Cron 7:15]
       â”‚
       â–¼
[Check: Gym confirmed?]
       â”‚
   â”Œâ”€â”€â”€â”´â”€â”€â”€â”
   â”‚       â”‚
   â–¼       â–¼
 [Yes]   [No]
   â”‚       â”‚
   â–¼       â–¼
[Stop]  [Send Reminder]
           â”‚
           â–¼
        [Wait 15 min]
           â”‚
           â–¼
        [Check again]
           â”‚
         (loop max 3x)
```

#### 7.1.5 Pre-Payday Alert (Cron: dÃ­a 13 y 28)
```
[Cron dÃ­a 13/28]
       â”‚
       â–¼
[HTTP Request: GET /finance/payday-plan]
       â”‚
       â–¼
[Format Financial Alert]
       â”‚
       â–¼
[Telegram: Send with Buttons]
```

### 7.2 Variables de Entorno N8N

```env
FASTAPI_URL=http://fastapi:8000/api/v1
TELEGRAM_BOT_TOKEN=xxx
NOTION_API_KEY=xxx
USER_TELEGRAM_ID=xxx
```

---

## 8. Datos del Usuario

### 8.1 Perfil Carlos

```yaml
personal:
  name: Carlos
  age: 25
  location: MÃ©xico
  partner: SÃ­ (Ã©l la apoya econÃ³micamente)
  pets: 2 perros

work:
  primary:
    company: PayCash
    role: Fullstack Developer
    type: Remoto
    schedule: "9:00-19:00"
    daily_standup: "9:00 AM"
    tools: [Jira, NetSuite, JavaScript, Python]
  
  freelance:
    platforms: [Workana]
    active_clients: 2
    specialties: [Power Automate, Web Development]
    average_monthly: Variable (~$4,500 MXN primera semana)

schedule:
  wake_up: "6:00-7:00 AM"
  gym_preferred: "7:00-8:00 AM"
  lunch: "14:00-15:30"
  study_hour: "17:30-18:30"
  end_work: "19:00"

goals:
  health:
    - Gym 5 dÃ­as/semana (PPL)
    - Tracking de peso
    - AlimentaciÃ³n consciente
  
  financial:
    - Liquidar deuda de $330,000 MXN
    - Prioridad: Tarjeta (60% interÃ©s)
    - No compras impulsivas
  
  professional:
    - No olvidar actualizar Jira
    - Prospectar clientes freelance
    - Aprender ediciÃ³n de video
  
  personal:
    - No burnout
    - Time blocking efectivo
    - Sistema Second Brain funcional

pain_points:
  - Se le olvida actualizar Jira
  - Comprador compulsivo
  - Ideas/tareas se pierden
  - No tiene bloques claros de trabajo
  - Abrumado con muchas cosas abiertas
```

### 8.2 Datos Financieros Actuales

```yaml
income:
  monthly:
    paycash: 50000  # MXN, quincenal (25K x 2)
    freelance: 4500  # Variable, primera semana
  total: 54500

expenses:
  fixed:
    car_payment: 12000
    starlink: 1000
    gym: 400
    claude_max: 2000
    ps_plus: 150
    food_base: 8000  # 2 personas + 2 perros
    # Notion: 0 (plan gratis)
  total_fixed: 23550

debts:
  - name: "Tarjeta Banco"
    original: 80000
    current: 80000
    interest_rate: 60  # % anual
    monthly_interest: 4000
    minimum_payment: 4000
    priority: 1
    
  - name: "Coppel"
    original: 30000
    current: 30000
    interest_rate: 50
    minimum_payment: 1800
    priority: 2
    
  - name: "Mercado Libre"
    original: 20000
    current: 20000
    interest_rate: 40
    minimum_payment: 1500
    priority: 3
    
  - name: "Carro"
    original: 200000
    current: 200000  # Aproximado
    interest_rate: 15
    monthly_payment: 12000  # Fijo
    priority: 4  # No adelantar

  total_debt: 330000
  total_minimum: 19300
  total_monthly_interest: ~6500

analysis:
  income: 54500
  fixed_expenses: 23550
  debt_minimums: 19300
  remaining: 11650
  
  recommended_extra_debt: 8000
  available_after_plan: 3650
  
  months_to_debt_free:
    aggressive: 10-12  # Si abona $8K extra/mes
    minimum_only: "Nunca"  # Intereses > pagos
```

### 8.3 Rutina de Gym (PPL)

```yaml
schedule:
  monday: Push
  tuesday: Pull
  wednesday: Legs
  thursday: Push
  friday: Pull
  saturday: Rest o Legs opcional
  sunday: Rest

exercises:
  push:
    - name: Press Banca
      target_sets: 3
      target_reps: 8-10
    - name: Press Inclinado
      target_sets: 3
      target_reps: 10-12
    - name: Press Militar
      target_sets: 3
      target_reps: 10-12
    - name: Fondos
      target_sets: 3
      target_reps: 12-15
    - name: Extensiones TrÃ­ceps
      target_sets: 3
      target_reps: 12-15
  
  pull:
    - name: Dominadas
      target_sets: 3
      target_reps: 8-10
    - name: Remo con Barra
      target_sets: 3
      target_reps: 8-10
    - name: Remo Mancuerna
      target_sets: 3
      target_reps: 10-12
    - name: Face Pulls
      target_sets: 3
      target_reps: 15-20
    - name: Curl BÃ­ceps
      target_sets: 3
      target_reps: 10-12
  
  legs:
    - name: Sentadilla
      target_sets: 4
      target_reps: 6-8
    - name: Peso Muerto Rumano
      target_sets: 3
      target_reps: 8-10
    - name: Prensa
      target_sets: 3
      target_reps: 10-12
    - name: Curl Femoral
      target_sets: 3
      target_reps: 12-15
    - name: Pantorrillas
      target_sets: 4
      target_reps: 15-20

tracking:
  weight_day: Sunday
  goal: Perder grasa, mantener mÃºsculo
```

### 8.4 Proyectos de Estudio

```yaml
study_projects:
  - name: "EdiciÃ³n de Video (Premiere)"
    type: aprendizaje
    current_milestone: "Curso bÃ¡sico"
    progress: 30%
    in_rotation: true
    
  - name: "DSPy / AI Agents"
    type: aprendizaje
    current_milestone: "Implementar primer agente"
    progress: 20%
    in_rotation: true
    
  - name: "NetSuite Avanzado"
    type: aprendizaje
    current_milestone: "SuiteScript 2.0"
    progress: 50%
    in_rotation: true

rotation_rules:
  max_consecutive_days: 3
  priority_on_deadline: true
  balance_technical_creative: true
```

---

## 9. Plan de ImplementaciÃ³n

### 9.1 Fases

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                 ROADMAP DE IMPLEMENTACIÃ“N                   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                             â”‚
â”‚  FASE 0: Setup (Semana 1)                                  â”‚
â”‚  â”œâ”€â”€ Crear databases en Notion                             â”‚
â”‚  â”œâ”€â”€ Setup proyecto FastAPI                                â”‚
â”‚  â”œâ”€â”€ Setup bot Telegram                                    â”‚
â”‚  â””â”€â”€ Conectar N8N                                          â”‚
â”‚                                                             â”‚
â”‚  FASE 1: Core Productivity (Semana 2-3)                    â”‚
â”‚  â”œâ”€â”€ InboxProcessor agent                                  â”‚
â”‚  â”œâ”€â”€ Captura rÃ¡pida funcional                             â”‚
â”‚  â”œâ”€â”€ Morning briefing                                      â”‚
â”‚  â”œâ”€â”€ Hourly check-ins                                      â”‚
â”‚  â””â”€â”€ Basic time blocking                                   â”‚
â”‚                                                             â”‚
â”‚  FASE 2: PM Features (Semana 4-5)                          â”‚
â”‚  â”œâ”€â”€ ComplexityAnalyzer agent                             â”‚
â”‚  â”œâ”€â”€ TimeBlockGuardian agent                              â”‚
â”‚  â”œâ”€â”€ JiraIntegrator agent                                 â”‚
â”‚  â”œâ”€â”€ Project management                                    â”‚
â”‚  â””â”€â”€ Persistent reminders                                  â”‚
â”‚                                                             â”‚
â”‚  FASE 3: Health Module (Semana 6-7)                        â”‚
â”‚  â”œâ”€â”€ NutritionAnalyzer agent                              â”‚
â”‚  â”œâ”€â”€ WorkoutLogger agent                                  â”‚
â”‚  â”œâ”€â”€ ProgressAnalyzer agent                               â”‚
â”‚  â”œâ”€â”€ Gym reminders                                        â”‚
â”‚  â””â”€â”€ Weight tracking                                       â”‚
â”‚                                                             â”‚
â”‚  FASE 4: Finance Module (Semana 8-9)                       â”‚
â”‚  â”œâ”€â”€ SpendingAnalyzer agent                               â”‚
â”‚  â”œâ”€â”€ PaydayPlanner agent                                  â”‚
â”‚  â”œâ”€â”€ DebtStrategist agent                                 â”‚
â”‚  â”œâ”€â”€ Purchase analysis                                     â”‚
â”‚  â””â”€â”€ Financial alerts                                      â”‚
â”‚                                                             â”‚
â”‚  FASE 5: Study & Polish (Semana 10-12)                     â”‚
â”‚  â”œâ”€â”€ StudyBalancer agent                                  â”‚
â”‚  â”œâ”€â”€ Weekly reviews                                        â”‚
â”‚  â”œâ”€â”€ Dashboard Notion                                      â”‚
â”‚  â”œâ”€â”€ DSPy optimization                                     â”‚
â”‚  â””â”€â”€ Bug fixes & refinements                              â”‚
â”‚                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 9.2 Entregables por Fase

#### Fase 0: Setup
- [ ] 8 databases creadas en Notion con schemas correctos
- [ ] Proyecto FastAPI con estructura base
- [ ] Bot Telegram respondiendo a /start
- [ ] N8N conectado a Telegram webhook
- [ ] Docker compose para desarrollo local

#### Fase 1: Core Productivity
- [ ] Endpoint POST /inbox funcional
- [ ] InboxProcessor clasificando con >70% accuracy
- [ ] Morning briefing enviÃ¡ndose 6:30 AM
- [ ] Check-ins cada hora (9-18)
- [ ] Tasks moviÃ©ndose entre estados

#### Fase 2: PM Features
- [ ] Tareas dividiÃ©ndose automÃ¡ticamente
- [ ] Deep work protegido
- [ ] Jira updates generÃ¡ndose
- [ ] Proyectos creÃ¡ndose conversacionalmente
- [ ] Recordatorios persistiendo hasta resolverse

#### Fase 3: Health Module
- [ ] Comidas registrÃ¡ndose al final del dÃ­a
- [ ] Workouts con comparaciÃ³n vs anterior
- [ ] PRs detectÃ¡ndose automÃ¡ticamente
- [ ] Peso corporal graficÃ¡ndose
- [ ] Gym reminders insistentes

#### Fase 4: Finance Module
- [ ] Compras analizÃ¡ndose en contexto
- [ ] Pre-quincena alertas funcionando
- [ ] Plan de distribuciÃ³n generÃ¡ndose
- [ ] Deudas trackeÃ¡ndose con proyecciÃ³n
- [ ] Compras impulsivas flaggeÃ¡ndose

#### Fase 5: Study & Polish
- [ ] RotaciÃ³n de estudio balanceada
- [ ] Review semanal completo (domingo)
- [ ] Dashboard Notion con mÃ©tricas
- [ ] Agents optimizados con ejemplos
- [ ] Sistema estable y usable

---

## 10. Anexos

### 10.1 Estructura de Archivos del Proyecto

```
carlos-command/
â”œâ”€â”€ docker-compose.yml
â”œâ”€â”€ .env
â”œâ”€â”€ README.md
â”‚
â”œâ”€â”€ api/
â”‚   â”œâ”€â”€ main.py
â”‚   â”œâ”€â”€ config.py
â”‚   â”œâ”€â”€ requirements.txt
â”‚   â”‚
â”‚   â”œâ”€â”€ routers/
â”‚   â”‚   â”œâ”€â”€ inbox.py
â”‚   â”‚   â”œâ”€â”€ tasks.py
â”‚   â”‚   â”œâ”€â”€ projects.py
â”‚   â”‚   â”œâ”€â”€ nutrition.py
â”‚   â”‚   â”œâ”€â”€ workouts.py
â”‚   â”‚   â”œâ”€â”€ finance.py
â”‚   â”‚   â””â”€â”€ study.py
â”‚   â”‚
â”‚   â”œâ”€â”€ agents/
â”‚   â”‚   â”œâ”€â”€ base.py
â”‚   â”‚   â”œâ”€â”€ inbox_processor.py
â”‚   â”‚   â”œâ”€â”€ complexity_analyzer.py
â”‚   â”‚   â”œâ”€â”€ time_block_guardian.py
â”‚   â”‚   â”œâ”€â”€ morning_planner.py
â”‚   â”‚   â”œâ”€â”€ checkin_agent.py
â”‚   â”‚   â”œâ”€â”€ jira_integrator.py
â”‚   â”‚   â”œâ”€â”€ nutrition_analyzer.py
â”‚   â”‚   â”œâ”€â”€ workout_logger.py
â”‚   â”‚   â”œâ”€â”€ progress_analyzer.py
â”‚   â”‚   â”œâ”€â”€ spending_analyzer.py
â”‚   â”‚   â”œâ”€â”€ payday_planner.py
â”‚   â”‚   â”œâ”€â”€ debt_strategist.py
â”‚   â”‚   â””â”€â”€ study_balancer.py
â”‚   â”‚
â”‚   â”œâ”€â”€ services/
â”‚   â”‚   â”œâ”€â”€ notion.py
â”‚   â”‚   â”œâ”€â”€ telegram.py
â”‚   â”‚   â””â”€â”€ gemini.py
â”‚   â”‚
â”‚   â”œâ”€â”€ models/
â”‚   â”‚   â”œâ”€â”€ task.py
â”‚   â”‚   â”œâ”€â”€ project.py
â”‚   â”‚   â”œâ”€â”€ workout.py
â”‚   â”‚   â”œâ”€â”€ nutrition.py
â”‚   â”‚   â””â”€â”€ finance.py
â”‚   â”‚
â”‚   â””â”€â”€ utils/
â”‚       â”œâ”€â”€ date_utils.py
â”‚       â””â”€â”€ formatters.py
â”‚
â”œâ”€â”€ bot/
â”‚   â”œâ”€â”€ main.py
â”‚   â”œâ”€â”€ handlers/
â”‚   â”‚   â”œâ”€â”€ commands.py
â”‚   â”‚   â”œâ”€â”€ messages.py
â”‚   â”‚   â””â”€â”€ callbacks.py
â”‚   â””â”€â”€ keyboards/
â”‚       â””â”€â”€ inline.py
â”‚
â”œâ”€â”€ n8n/
â”‚   â””â”€â”€ workflows/
â”‚       â”œâ”€â”€ morning_briefing.json
â”‚       â”œâ”€â”€ hourly_checkin.json
â”‚       â”œâ”€â”€ gym_reminder.json
â”‚       â”œâ”€â”€ telegram_handler.json
â”‚       â””â”€â”€ payday_alert.json
â”‚
â””â”€â”€ scripts/
    â”œâ”€â”€ setup_notion.py
    â”œâ”€â”€ migrate_data.py
    â””â”€â”€ test_agents.py
```

### 10.2 Docker Compose

```yaml
version: '3.8'

services:
  api:
    build: ./api
    ports:
      - "8000:8000"
    environment:
      - NOTION_API_KEY=${NOTION_API_KEY}
      - GEMINI_API_KEY=${GEMINI_API_KEY}
      - DATABASE_URL=sqlite:///./data/carlos.db
    volumes:
      - ./data:/app/data
    restart: unless-stopped

  bot:
    build: ./bot
    environment:
      - TELEGRAM_BOT_TOKEN=${TELEGRAM_BOT_TOKEN}
      - API_URL=http://api:8000
    depends_on:
      - api
    restart: unless-stopped

  n8n:
    image: n8nio/n8n
    ports:
      - "5678:5678"
    environment:
      - N8N_BASIC_AUTH_ACTIVE=true
      - N8N_BASIC_AUTH_USER=${N8N_USER}
      - N8N_BASIC_AUTH_PASSWORD=${N8N_PASSWORD}
    volumes:
      - ./n8n/data:/home/node/.n8n
    restart: unless-stopped
```

### 10.3 Variables de Entorno

```env
# Notion
NOTION_API_KEY=secret_xxx

# Telegram
TELEGRAM_BOT_TOKEN=xxx:yyy

# Gemini
GEMINI_API_KEY=xxx

# N8N
N8N_USER=carlos
N8N_PASSWORD=xxx

# API
API_SECRET_KEY=xxx
DEBUG=false
```

### 10.4 MÃ©tricas de Ã‰xito

| MÃ©trica | Objetivo Mes 1 | Objetivo Mes 3 |
|---------|----------------|----------------|
| Tareas capturadas/dÃ­a | 5+ | 10+ |
| % Jira actualizado | 70% | 95% |
| Gym dÃ­as/semana | 4/5 | 5/5 |
| Comidas registradas | 5/7 dÃ­as | 7/7 dÃ­as |
| Compras analizadas | 80% | 100% |
| Abono extra a deuda | $8,000/mes | $10,000/mes |
| Horas estudio/semana | 5h | 7h |
| Deep work blocks/dÃ­a | 1 | 2 |

---

## ğŸ“ Notas Finales

Este documento es la **especificaciÃ³n completa** del sistema Carlos Command. Debe actualizarse conforme se implementen cambios o se descubran nuevos requerimientos.

**PrÃ³ximo paso:** Crear las 8 databases en Notion con los schemas exactos definidos aquÃ­.

---

*Documento generado: Noviembre 2025*  
*VersiÃ³n: 1.0*  
*Autor: Claude + Carlos*